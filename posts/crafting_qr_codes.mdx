---
posted: 2024-9-12
desc: How they work and how to make 'em pretty
image: crafting.jpg
---

import { Sa } from "../components/mdx"
import init from "fuqr"
import { QrTutorial } from "../components/QrTutorial"

QR codes have invaded our world.

Their prolific penetration is no surprise. They store information efficiently, scan fast and reliably, and now that QR code scanning is built-in on most phone cameras, there is nothing that even comes close to their convenience.

They are simply irreplaceable to *anyone looking to share a URL* (read: everyone).

Suffice it to say, I've seen a few QR codes in my day to day.

{
<div className="grid rows-[min-content_1fr_min-content] cols-2 grid-flow-col gap-x-4 font-thin text-xs text-center">
  <div className="font-semibold text-lg">Me Writing this Blog Post</div>
  <img src="escape.jpg" alt="me escaping from a train full of salarymen with qr code faces"/>
  <span>
  <Sa href="https://www.flickr.com/photos/19736899@N04/2046534730">Original photo</Sa> by <Sa href="https://www.flickr.com/people/hern42/">Arnaud DG</Sa>, <Sa href="https://creativecommons.org/licenses/by/2.0/deed.en">CC BY 2.0</Sa>
  </span>
  <div className="font-semibold text-lg">The Observable Universe</div>
  <img src="station.jpg" alt="rush hour in train station where salarymen have qr code faces"/>
  <span>
    <Sa href="https://commons.wikimedia.org/wiki/File:Just_going_to_work_(3509126762).jpg">Original photo</Sa> by <Sa href="https://www.flickr.com/people/erikjohansson78/">erikjohansson</Sa>, <Sa href="https://creativecommons.org/licenses/by/2.0/deed.en">CC BY 2.0</Sa>
  </span>
</div>
}

With how widespread they are in consumer facing spaces like advertising, it's also no suprise that companies would want to brand their QR codes. The most common practice is placing a logo in the center, which works because QR codes have error correction built-in.

{
  <div className="grid cols-2 sm:cols-4 gap-2">
    <img src="logo/in_mcdonalds.jpg" alt="mcdonalds app"/>
    <img src="logo/sf_uber.jpg" alt="uber ad"/>
    <img src="logo/duolingo.jpg" alt="duolingo profile"/>
    <img src="logo/instagram.svg" alt="instagram profile"/>
  </div>
}

Beyond simply placing a logo on top, there have also been many attempts to create "artistic" QR codes. Making a picture is the obvious thing to do, and there are various ways of combining the QR code pixels with an image for a unique look.

{
  <div className="grid cols-2 sm:cols-4 gap-2 font-thin text-xs text-center pixelated">
    <div>
      <img src="image/qart_go.png" alt="golang mascot qart code"/>
      <Sa href="https://research.swtch.com/qart">QArt Codes</Sa>
    </div>
    <div>
      <img src="image/halftone_einstein.png" alt="halftone einstein qr code"/>
      <Sa href="https://cgv.cs.nthu.edu.tw/projects/Recreational_Graphics/Halftone_QRCodes">Halftone QR Codes, 2013</Sa>
    </div>
    <div>
      <img src="image/qrpicture_awesome.png" alt="awesome face qr code"/>
      <Sa href="https://github.com/xyzzy/qrpicture">QRpicture</Sa>
    </div>
    <div>
      <img src="image/overlay_burger_king.jpg" alt="burger king ad qr code"/>
      <Sa href="https://www.youtube.com/watch?v=hnYXq1oyi2g">Burger King VMA Commercials</Sa>
    </div>
  </div>
}

While simple in theory, getting the perfect input image for a cohesive design may take some effort. An even more labor intensive approach is to have artists design fully bespoke QR codes from scratch.

{
  <div className="grid cols-2 sm:cols-4 gap-2 font-thin text-xs text-center pixelated">
    <div>
      <img src="bespoke/qrcanvas.jpg" alt="qrcanvas"/>
      <Sa href="https://qrcanvas.nl">QRcanvas</Sa>
    </div>
    <div>
      <img src="bespoke/amicollective.png" alt="amicollective"/>
      <Sa href="https://www.behance.net/gallery/3702490/CALENDAR">2012 MTS Calendar</Sa> <span className="whitespace-pre">Am I Collective</span> (<Sa href="https://thedsgnblog.tumblr.com/post/32805738545/am-i-collective-httpamicollectivecom">source</Sa>)
    </div>
    <div>
      <img src="bespoke/minor.png" alt="minor"/>
      minor<br/>
      (<Sa href="https://dribbble.com/minorart/shots">Dribbble</Sa>, <Sa href="https://www.behance.net/739019620c2bc">Behance</Sa>)
    </div>
    <div>
      <img src="bespoke/elkoy.png" alt="elkoy artists collective"/>
      <Sa href="https://art-qrcode.com/">The Art of QR Codes / <span className="whitespace-pre">Elkoy Artists</span> Collective</Sa>
    </div>
  </div>
}

{
  <small className="text-stone-700">
    There are more amazing examples than I could possibly fit on one page. These artists' have many other works, and Pinterest is full of examples that are otherwise impossible to find.
  </small>
}

Of course, these human-made QR code's aren't practical for anyone without lots of time or money since each new URL would require a redesign.

The natural progression is beating the dead elephant in the room called generative AI. These AI QR codes promise beautiful and customizable designs at scale, and when using carefully engineered prompts the results appear good. But I've no prompting expertise, so I've generated naught but nightmares.

{
  <div className="mx-auto -indent-2 text-sm leading-loose font-serif">
    <p className="ml-2">I shall not beleaguer thy weary eyes,</p>
    <p className="ml-2">nor further burden the web, world wide,</p>
    <p className="ml-2">with pages from this Babelian picture tome.</p>
    <p className="ml-2">This is not a place of honor,</p>
    <p className="ml-2"><em>there are thirteen fingers on her,</em></p>
    <p className="ml-2">anime girl big boobs ancient rome.</p>
  </div>
}

I'm more interested in programmatically generated QR codes anyways.

Before they invented AI QR codes, the guys behind [QRBTF](https://qrbtf.com) also created these beautiful style options for their generator.

{
  <div className="grid cols-2 gap-2 font-thin text-xs text-center">
    <div>
      <img src="qrbtf/sp1.svg" alt="blocky design"/>
      Created using <Sa href="https://qrbtf.com">QRBTF</Sa>
    </div>
    <div>
      <img src="qrbtf/sp2.svg" alt="bubble design"/>
      Created using <Sa href="https://qrbtf.com">QRBTF</Sa>
    </div>
  </div>
}

To this day, I still haven't seen anyone else make QR codes like this. So I took it upon myself to make the QR code generator I wanted.

{
  <div className="grid cols-2 sm:cols-4 gap-2">
    <img src="qrframe/stained_glass.svg" alt="stained glass"/>
    <img src="qrframe/quantum.svg" alt="physics"/>
    <img src="qrframe/whiteboard.png" alt="whiteboard marker"/>
    <img src="qrframe/neon.svg" alt="neon sign"/>
    <img src="qrframe/layers.svg" alt="layered patterns"/>
    <img src="qrframe/tile.png" alt="bathroom tile"/>
    <img src="qrframe/dots.svg" alt="benday dots"/>
    <img src="qrframe/mondrian.svg" alt="abstract art"/>
  </div>
}

It's available at https://qrframe.kylezhe.ng, and it's a tool for crafting QR codes. It comes with some presets, but it's simple to modify or create new ones, because it's just Javascript that generates an SVG or renders to an HTML canvas.

Here's the [source code](https://github.com/zhengkyl/qrframe) for the perverts.

Feel free to play with it, but in order to craft QR codes with intention, we first need to learn how they work.

## The Anatomy of a QR Code

<QrTutorial/>

Here's all you need to remember: the **finder patterns must be the right _shape_**, and the rest of the QR code just needs to be dark or light enough in the right *place*.

That's 80% of making artistic QR codes, but unfortunately there's one major gotcha we've gotta cover.

## Convenience at a Cost

Can you tell what I did wrong with these QR codes I drew using chalk?

{
  <div className="grid cols-2 gap-4 font-thin text-xs text-center">
    <div>
      <img src="stencil_1.jpg" alt="bad qr code stencil"/>
      Attempt 1 (terrible)
    </div>
    <div>
      <img src="stencil_2.jpg" alt="slightly better qr code stencil"/>
      Attempt 2 (still unscannable)
    </div>
  </div>
}

The first one is janky, but I was legitimately confused why my second attempt failed.

Computer vision is commonly used in code scanners nowadays, but the tradeoff of non-dedicated scanners (like the default smartphone camera app) is that they are less sensitive and much pickier about what they recognize.

{
  <div className="grid cols-1 sm:cols-2 gap-2 pixelated">
    <div>
      The upside is that you can probably scan this barcode too.
    </div>
    <div className="font-thin text-xs text-center ">
      <img src="barcode.png" alt="normal barcode"/>
      Created using <Sa href="https://barcode.tec-it.com/en/UPCA">TEC-IT Barcode Generator</Sa>
    </div>
  </div>
}

I'm no expert in this domain, and computer vision is somewhat of a black box anyway, so the only way I know to tell if a QR code will scan is to try scanning it.

This process is just unintuitive. For instance, when a code doesn't scan immediately, I've found moving farther *away* to help the most.

In my experience, **solid colors** and **high contrast** are good indicators, but once a QR code strays from black and white pixels, its fate is in the hands of God.

## Shoulders of Giants

Thankfully, QR codes are turning 30, and they spent their twenties experimenting.

We can learn from all these image-based techniques as they answer the question: 

How do you make each pixel decode correctly while still preserving the larger image?

{
  <div className="grid cols-2 sm:cols-4 gap-2 font-thin text-xs text-center pixelated">
    <div>
      <img src="mike/halftone.png" alt="mike wazowski halftone qr code"/>
      Created using <Sa href="https://cgv.cs.nthu.edu.tw/projects/Recreational_Graphics/Halftone_QRCodes"><span className="whitespace-pre">Halftone QR Codes, 2013</span></Sa>
    </div>
    <div>
      <img src="mike/amzqr.jpg" alt="mike wazowski amzing qr code"/>
      Created using <Sa href="https://github.com/x-hw/amazing-qr">Amazing-QR</Sa>
    </div>
    <div>
      <img src="mike/visualead.jpg" alt="mike wazowski visualead qr code"/>
      Created using <Sa href="https://github.com/x-hw/amazing-qr">Visualead</Sa>
    </div>
    <div>
      <img src="overlay_bad_apple.jpg" alt="overlay bad apple video qr code"/>
      <Sa href="https://www.youtube.com/watch?v=tPYUdjptMpk">Bad Apple but it is played with QR code</Sa>
    </div>
  </div>
}

The low resolution black and white dithered effect is just a smart stylistic choice that hides the data as noise.

These techniques modify the QR code data itself.

{
  <div className="grid cols-2 sm:cols-4 gap-2 font-thin text-xs text-center pixelated">
    <div className="font-thin text-xs text-center ">
      <img src="mike/qart.png" alt="mike wazowski qart code"/>
      Created using <Sa href="https://research.swtch.com/qr/draw">QArt Coder</Sa>
    </div>
    <div className="font-thin text-xs text-center ">
      <img src="mike/myqrart.svg" alt="mike wazowski my qr art code"/>
      Created using <Sa href="https://my-qr.art/">MY-QR.ART</Sa>
    </div>
    <div>
      <img src="mike/qrpicture.jpg" alt="mike wazowski qr picture"/>
      Created using <Sa href="https://qrpicture.com">QRpicture</Sa>
    </div>
    <div>
      <img src="reverse_bad_apple.jpg" alt="reverse bad apple video qr code"/>
      <Sa href="https://www.youtube.com/watch?v=dWkTWwRKUZ4">Bad Apple!! on a QR Code Generator</Sa>
    </div>
  </div>
}

## Fin

I don't know how to finish this blog post. I'll write this later.

## Tangents

Here are some QR code thoughts which I had to get off my mind.

1. There are only 3 encoding modes!
    - The QR code standard lists encoding modes that are not relevant to ordinary users. Every QR code explainer mentions Kanji mode, a legacy mode using a legacy character encoding for Japanese, when it just isn't supported by most generators or scanners. Ditto for Structured append, ECI, and FNC1 encoding modes.
2. The mask selection step is deeply unserious.
    - The best mask is chosen by scoring the masked data, but the scoring conditions are arbitrary, and all 8 masks will work just fine anyway.
    - This interative step by step walkthrough showcases this in Steps 7 and 8. Choose the worst mask and see that it doesn't matter.
    - https://www.nayuki.io/page/creating-a-qr-code-step-by-step
3. I found a lot of things that didn't fit anywhere, but I don't want to lose the links.
    - https://www.thonky.com/qr-code-tutorial is a great resource and helped me understand the error correction math.
    - [Lachlan Arthur](https://github.com/lachlanarthur)'s [JSFiddle implementation](https://jsfiddle.net/lachlan/r8qWV/) of a halftone generator seemed to spark a lot of inspiration.
        - [Jason Butler](https://github.com/nythrox)'s [Halftone QR Code Generator](https://nythrox.github.io/halftone-qrcode)
        - [Roman Tsukanov](https://github.com/gentlecat)'s [Halftone QR Code Generator](https://qr.roman.zone)
    - [vCode](https://github.com/ruitaocc/vCode) seems like a cool halftone generator, but it's a 9 year old iOS app, so it's basically lost media.
    - [segno](https://github.com/heuer/segno) is probably the only QR code generator that supports Kanji mode.
    - <p>[QRazyBox](https://merri.cx/qrazybox/) is a super cool QR code recovery tool that I used to decode this book cover. <img src="/posts/crafting_qr_codes/sf_book.jpg" alt="qr code on book cover"/> [original stock image from 2011](https://www.istockphoto.com/vector/qr-code-gm156283521-15512938).</p>
    - I've found two 3d galleries of QR code art. If I had a nickel...
        - https://www.qrmosaics.art/3d-gallery
        - https://www.ineoscan.com/qrcodefactory1

4. Some companies have even gone so far as to develop proprietary scannable codes to maintain their brand identity, to varying success.

![four proprietary scan codes](four_horsemen.png)

Tiktok and Snapchat have already replaced their custom codes with stylized QR codes.
