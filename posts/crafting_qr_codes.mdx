---
posted: 2024-9-27
desc: How they work and how to make 'em pretty
image: crafting.jpg
---

import { Code, Sa } from "../components/mdx"
import { QrTutorial } from "../components/QrTutorial"

QR codes have invaded our world.

Their prolific penetration is no surprise. They store information efficiently, scan fast and reliably, and now that QR code scanning is built-in on most phone cameras, there is nothing that even comes close to their convenience.

They are simply irreplaceable to *anyone looking to share a URL* (read: everyone).

Suffice it to say, I've seen a few QR codes in my day to day.

{
<div className="grid rows-[min-content_1fr_min-content] cols-2 grid-flow-col gap-x-4 font-thin text-xs text-center">
  <div className="font-semibold text-lg">Me Writing this Blog Post</div>
  <img src="escape.jpg" alt="me escaping from a train full of salarymen with qr code faces"/>
  <span>
  <Sa href="https://www.flickr.com/photos/19736899@N04/2046534730">Original photo</Sa> by <Sa href="https://www.flickr.com/people/hern42/">Arnaud DG</Sa>, <Sa href="https://creativecommons.org/licenses/by/2.0/deed.en">CC BY 2.0</Sa>
  </span>
  <div className="font-semibold text-lg">The Observable Universe</div>
  <img src="station.jpg" alt="rush hour in train station where salarymen have qr code faces"/>
  <span>
    <Sa href="https://commons.wikimedia.org/wiki/File:Just_going_to_work_(3509126762).jpg">Original photo</Sa> by <Sa href="https://www.flickr.com/people/erikjohansson78/">erikjohansson</Sa>, <Sa href="https://creativecommons.org/licenses/by/2.0/deed.en">CC BY 2.0</Sa>
  </span>
</div>
}

With how widespread they are in consumer facing spaces like advertising, it's also no suprise that companies would want to brand their QR codes. The most common practice is placing a logo in the center, which works because QR codes have error correction built-in.

{
  <div className="grid cols-2 sm:cols-4 gap-2">
    <img src="logo/in_mcdonalds.jpg" alt="mcdonalds app"/>
    <img src="logo/sf_uber.jpg" alt="uber ad"/>
    <img src="logo/duolingo.jpg" alt="duolingo profile"/>
    <img src="logo/instagram.svg" alt="instagram profile"/>
  </div>
}

Beyond simply placing a logo on top, there have also been many attempts to create "artistic" QR codes. Making a picture is the obvious thing to do, and there are various ways of combining the QR code pixels with an image for a unique look.

{
  <div className="grid cols-2 sm:cols-4 gap-2 font-thin text-xs text-center pixelated">
    <div>
      <img src="image/qart_go.png" alt="golang mascot qart code"/>
      <Sa href="https://research.swtch.com/qart">QArt Codes</Sa>
    </div>
    <div>
      <img src="image/halftone_einstein.png" alt="halftone einstein qr code"/>
      <Sa href="https://cgv.cs.nthu.edu.tw/projects/Recreational_Graphics/Halftone_QRCodes">Halftone QR Codes, 2013</Sa>
    </div>
    <div>
      <img src="image/qrpicture_awesome.png" alt="awesome face qr code"/>
      <Sa href="https://github.com/xyzzy/qrpicture">QRpicture</Sa>
    </div>
    <div>
      <img src="image/overlay_burger_king.jpg" alt="burger king ad qr code"/>
      <Sa href="https://www.youtube.com/watch?v=hnYXq1oyi2g">Burger King VMA Commercials</Sa>
    </div>
  </div>
}

While these might require some upfront technical work, it's trivial to change the image to create any number of new QR codes. This is in stark contrast to the labor intensive process of having artists design fully bespoke QR codes from scratch.

{
  <div className="grid cols-2 sm:cols-4 gap-2 font-thin text-xs text-center pixelated">
    <div>
      <img src="bespoke/qrcanvas.jpg" alt="qrcanvas"/>
      <Sa href="https://qrcanvas.nl">QRcanvas</Sa>
    </div>
    <div>
      <img src="bespoke/amicollective.png" alt="amicollective"/>
      <Sa href="https://www.behance.net/gallery/3702490/CALENDAR">2012 MTS Calendar</Sa> <span className="whitespace-pre">Am I Collective</span> (<Sa href="https://thedsgnblog.tumblr.com/post/32805738545/am-i-collective-httpamicollectivecom">source</Sa>)
    </div>
    <div>
      <img src="bespoke/minor.png" alt="minor"/>
      minor<br/>
      (<Sa href="https://dribbble.com/minorart/shots">Dribbble</Sa>, <Sa href="https://www.behance.net/739019620c2bc">Behance</Sa>)
    </div>
    <div>
      <img src="bespoke/elkoy.png" alt="elkoy artists collective"/>
      <Sa href="https://art-qrcode.com/">The Art of QR Codes / <span className="whitespace-pre">Elkoy Artists</span> Collective</Sa>
    </div>
  </div>
}

{
  <small className="text-stone-700">
    There are more amazing examples than I could possibly fit on one page. These artists' have many other works, and Pinterest is full of examples that are otherwise impossible to find.
  </small>
}

Obviously, human-made QR code's aren't practical for anyone without lots of time or money since each new URL would require a redesign.

The natural progression is beating the dead elephant in the room called generative AI. These AI QR codes promise beautiful and customizable designs at scale, and when using carefully engineered prompts the results appear good. But I've no prompting expertise, so I've generated naught but nightmares.

{
  <div className="mx-auto -indent-2 text-sm leading-loose font-serif">
    <p className="ml-2">I shall not beleaguer thy weary eyes,</p>
    <p className="ml-2">nor further burden the web, world wide,</p>
    <p className="ml-2">with pages from this Babelian picture tome.</p>
    <p className="ml-2">This is not a place of honor,</p>
    <p className="ml-2"><em>there are thirteen fingers on her,</em></p>
    <p className="ml-2">anime girl big boobs ancient rome.</p>
  </div>
}

I'm more interested in programmatically generated QR codes anyways.

Before they invented AI QR codes, the guys behind [QRBTF](https://qrbtf.com) also created these beautiful style options for their generator.

{
  <div className="grid cols-2 gap-2 font-thin text-xs text-center">
    <div>
      <img src="qrbtf/sp1.svg" alt="blocky design"/>
      Created using <Sa href="https://qrbtf.com">QRBTF</Sa>
    </div>
    <div>
      <img src="qrbtf/sp2.svg" alt="bubble design"/>
      Created using <Sa href="https://qrbtf.com">QRBTF</Sa>
    </div>
  </div>
}

To this day, I still haven't seen anyone else make QR codes like this. I wanted more, so I made my own generator.

{
  <div className="grid cols-2 sm:cols-4 gap-2">
    <img src="qrframe/stained_glass.svg" alt="stained glass"/>
    <img src="qrframe/quantum.svg" alt="physics"/>
    <img src="qrframe/whiteboard.png" alt="whiteboard marker"/>
    <img src="qrframe/neon.svg" alt="neon sign"/>
    <img src="qrframe/layers.svg" alt="layered patterns"/>
    <img src="qrframe/tile.png" alt="bathroom tile"/>
    <img src="qrframe/dots.svg" alt="benday dots"/>
    <img src="qrframe/mondrian.svg" alt="abstract art"/>
  </div>
}

It's available at https://qrframe.kylezhe.ng, but it's more of a tool for crafting QR codes. It comes with presets that are simple to modify or create from scratch, because it's just Javascript that generates an SVG or renders to an HTML canvas.

Here's the [source code](https://github.com/zhengkyl/qrframe) for the perverts.

Anyways, if you have the time, I'd like to share what I learned about QR codes along the way.

## The Anatomy of a QR Code

<QrTutorial/>

Here's all you need to remember to make an artistic QR code: the **finder patterns must be the right _shape_**, and the rest of the QR code just needs to be dark or light enough in the right *place*.

That's 80% of it, but unfortunately there's one major gotcha we've gotta cover.

## Convenience at a Cost

Can you tell what I did wrong with these QR codes I drew using chalk?

{
  <div className="grid cols-2 gap-4 font-thin text-xs text-center">
    <div>
      <img src="stencil_1.jpg" alt="bad qr code stencil"/>
      Attempt 1 (terrible)
    </div>
    <div>
      <img src="stencil_2.jpg" alt="slightly better qr code stencil"/>
      Attempt 2 (still unscannable)
    </div>
  </div>
}

The first one is janky, but I was legitimately confused why my second attempt failed.

Computer vision is commonly used in code scanners nowadays, but the tradeoff of non-dedicated scanners (like the default smartphone camera app) is that they are less sensitive and much pickier about what they recognize.

{
  <div className="grid cols-1 sm:cols-2 gap-2 pixelated">
    <div>
      The upside is that you can probably scan this barcode too.
    </div>
    <div className="font-thin text-xs text-center ">
      <img src="barcode.png" alt="normal barcode"/>
      Created using <Sa href="https://barcode.tec-it.com/en/UPCA">TEC-IT Barcode Generator</Sa>
    </div>
  </div>
}

I'm no expert in this domain, and computer vision is somewhat of a black box anyway, so the only way I know to tell if a QR code will scan is to try scanning it.

And when a code doesn't scan immediately, I've found moving farther *away* tends to help.

In my experience, **solid colors** and **high contrast** are good indicators (and what my chalk drawing lacked), but once a QR code strays from black and white pixels, its fate is partially in the hands of God.

With that in mind, let's cover existing ways people have successfully created artistic codes programmatically.

## Image Techniques

There is a wide breadth and depth of research into creating images with QR codes, so I'll only briefly cover these two categories I came up with.

### Dot overlay

{
  <div className="grid cols-1 sm:cols-4 gap-2 pixelated py-2">
    <div className=" font-thin text-xs text-center">
      <img src="mike/amzqr.jpg" alt="mike wazowski amzing qr code"/>
      Created using <Sa href="https://github.com/x-hw/amazing-qr">Amazing-QR</Sa>
    </div>
    <p className="sm:col-span-3 pb-8 sm:py-2">
      In the simplest case, you can just place dots over the center of where each pixel would be. A dot at least 1/3 the width and height of a pixel is usually enough for it to decode properly.
    </p>
    <div className=" font-thin text-xs text-center">
      <img src="mike/visualead.jpg" alt="mike wazowski visualead qr code"/>
      Created using <Sa href="https://github.com/x-hw/amazing-qr">Visualead</Sa>
    </div>
    <p className="sm:col-span-3 pb-8 sm:py-2">
      In addition to a center dot, you can partially lighten or darken the entirety of each pixel.
    </p>
    <div className=" font-thin text-xs text-center">
      <img src="mike/halftone.png" alt="mike wazowski halftone qr code"/>
      Created using <Sa href="https://cgv.cs.nthu.edu.tw/projects/Recreational_Graphics/Halftone_QRCodes">Halftone QR Codes, 2013</Sa>
    </div>
    <p className="sm:col-span-3 pb-8 sm:py-2">
      By downscaling the image or using pixel art, the center dot can be hidden in plain sight. Dithering and limiting the color palette (quantization) both increase noise which also provides more camouflage.
    </p>
    <div className="font-thin text-xs text-center">
      <img src="mike/micrography.png" alt="mike wazowski micrography qr code"/>
      Example from <Sa href="https://cgv.cs.nthu.edu.tw/projects/Recreational_Graphics/MQRC">Micrography QR Codes, 2019</Sa>
    </div>
    <p className="sm:col-span-3 pb-8 sm:py-2">
      The most unique technique I've seen involves generating word clouds. In this case, the overlay dots are used in an intermediate step to drive a text deforming algorithm.
    </p>
    <div className="font-thin text-xs text-center">
      <img src="image/overlay_bad_apple.jpg" alt="overlay bad apple video qr code"/>
      <Sa href="https://www.youtube.com/watch?v=tPYUdjptMpk">Bad Apple but it is played with QR code</Sa>
    </div>
    <p className="sm:col-span-3 pb-8 sm:py-2">
      The jump to animation is simple, since the same dot overlay can be drawn on each frame. This example changes over time to display the lyrics though.
    </p>
  </div>
}

### Reverse-engineering

These techniques start with the desired output and modify the input data to match. These are basically incompatible with a normal QR code generator and require deep custom logic.

{
  <div className="grid cols-1 sm:cols-4 gap-2 pixelated py-2">
    <div className="font-thin text-xs text-center">
      <img src="mike/qart.png" alt="mike wazowski qart code"/>
      Created using <Sa href="https://research.swtch.com/qr/draw">QArt Coder</Sa>
    </div>
    <p className="sm:col-span-3 pb-8 sm:py-2">
      URLs can have anchors like <Code>test.com#anchor</Code>. Usually, this scrolls to a specific part of a page, but an invalid anchor is just ignored. The math used to manipulate pixels by adding an anchor is covered in <a href="https://research.swtch.com/qart">QArt Codes</a>.
    </p>
    <div className="font-thin text-xs text-center">
      <img src="mike/myqrart.svg" alt="mike wazowski my qr art code"/>
      Created using <Sa href="https://my-qr.art/">MY-QR.ART</Sa>
    </div>
    <p className="sm:col-span-3 pb-8 sm:py-2">
      This site lets you draw the desired output data, which can be directly interpreted as part of the input text. The first half of the text is the url to a link redirect service and the random characters that follow act as a unique key. For details, see <a href="https://marienraat.nl/hacking-qr-codes.html">Hacking QR code design</a>.
    </p>
    <div className="font-thin text-xs text-center">
      <img src="mike/qrpicture.jpg" alt="mike wazowski qr picture"/>
      Created using <Sa href="https://qrpicture.com">QRpicture</Sa>
    </div>
    <p className="sm:col-span-3 pb-8 sm:py-2">
      Here, the data pixels match an image, but they are not part of the decoded message. In other words, they are changing the padding bytes. <a href="https://xyzzy.github.io/2020/08/20/Show-HN-Photo-Realistic-QR-Codes.html">See their HN post</a>. <br/> (EDIT: This padding manipulation method was first described in <a href="https://www.ieice.org/publications/conferences/summary.php?id=FIT0000009019&expandable=2&ConfCd=F&session_num=4V&lecture_number=O-006&year=2011&conf_type=F">Expansion of Image Displayable Area in Design QR Code
and Its Applications, 2011</a>.)
    </p>
    <div className="font-thin text-xs text-center">
      <img src="image/reverse_bad_apple.jpg" alt="reverse bad apple video qr code"/>
      <Sa href="https://www.youtube.com/watch?v=dWkTWwRKUZ4">Bad Apple!! on a QR Code Generator</Sa>
    </div>
    <p className="sm:col-span-3 pb-8 sm:py-2">
      In terms of animation, reverse-engineering the data for every "frame" is a bit more tedious, and the QR code is unlikely to be scannable. See their <a href="https://www.youtube.com/watch?v=R4p2OcRmTg4">behind the scenes video</a> to see how they approached it.
    </p>
  </div>
}

(EDIT: I ended up making my own reverse-engineered Bad Apple. Here's the [scannable](https://youtu.be/8HG8HJ7tbO8) and [unscannable](https://youtu.be/1ems029Rln4) version.)

## Non-Image Techniques

Since there aren't too many examples of these, I'll be showing my own work and giving my thoughts.

While each unique design will have unique challenges, hopefully these examples can give you some some idea of steps you can take.

### Forgery

{
  <div className="grid cols-2 gap-2 font-thin text-xs text-center pixelated">
    <div>
      <img src="nonimage/coupland.jpg" alt="douglas coupland qr code"/>
      <Sa href="https://coupland.com">Douglas Coupland</Sa> <span className="whitespace-pre">QR Boogie-Woogie No. 5</span>
    </div>
    <div>
      <img src="qrframe/coupland.png" alt="coupland forgery"/>
      Created using <Sa href="https://qrframe.kylezhe.ng">qrframe</Sa>
    </div>
  </div>
}

Theft is the best type of complement... or something like that. Often times human-made designs are possible to implement using code. Here, Douglas Coupland has replaced 2x2 squares of black and white with a corresponding dark or light colored square. Not only is this easy to code, it demonstrates a common tactic of replacing *groups* of pixels with a larger design element. See [Vancouver Codes (2012)](https://www.youtube.com/watch?v=iX7iGd36NEg) for more examples of his work.

{
  <div className="grid cols-2 gap-2 font-thin text-xs text-center pixelated">
    <div>
      <img src="nonimage/qrarts.jpg" alt="qrarts qr code"/>
      <Sa href="https://web.archive.org/web/20140103162236/http://qrarts.com/">QrArts</Sa>
    </div>
    <div>
      <img src="qrframe/qrarts.png" alt="qrarts forgery"/>
      Created using <Sa href="https://qrframe.kylezhe.ng">qrframe</Sa>
    </div>
  </div>
}

However, not all that glitters is a scannable QR code. The original design is slick, but the gap between dots is somewhat problematic. Scanning from a distance works, but for my recreation I opted to fill the gaps with a gray shadow. This is admittedly much less cool, but many such compromises are inevitable.

{
  <div className="grid cols-2 gap-2 font-thin text-xs text-center pixelated">
    <div>
      <img src="nonimage/qrbtf.svg" alt="a2c qrbtf code"/>
      <Sa href="https://qrbtf.com/en/style/a2c">QRBTF A2C Style</Sa>
    </div>
    <div>
      <img src="qrframe/qrbtf.svg" alt="a2c qrbtf forgery"/>
      Created using <Sa href="https://qrframe.kylezhe.ng">qrframe</Sa>
    </div>
  </div>
}

In the best case scenario, you can copy the code directly. This style option, along with many others, is found in the [`react-qrbtf`](https://github.com/CPunisher/react-qrbtf) repository under the MIT license. Building on top of existing code is a great way to make a new design, so feel free to use my code in the [`qrframe`](https://github.com/zhengkyl/qrframe) repository as well. The psychological damage you'll suffer is cost enough.

### Touching grass

{
  <div className="grid cols-2 gap-2 font-thin text-xs text-center pixelated">
    <div>
      <img src="nonimage/mosaic.jpg" alt="elephant mosaic"/>
      Mosaic inside the Vatican museum
    </div>
    <div>
      <img src="qrframe/mosaic.svg" alt="mosaic qr code"/>
      Created using <Sa href="https://qrframe.kylezhe.ng">qrframe</Sa>
    </div>
  </div>
}

While it had nothing to do with this mosaic in particular, exposure to all types of art is probably the best source of creative energy. The design is quite simple, but I love its character. If there's a lesson to be learned here, it's that rules are made to be respectfully broken. You CAN mess with the finder patterns, but notice how the cross shape is completely preserved in two of them.

{
  <div className="grid cols-2 gap-2 font-thin text-xs text-center pixelated">
    <div>
      <img src="nonimage/waves.jpg" alt="waves on a rocky beach"/>
      The Mediterranean Sea
    </div>
    <div>
      <img src="nonimage/waves.gif" alt="animated waves qr code"/>
      Created using <Sa href="https://github.com/zhengkyl/fuqr">fuqr</Sa>
    </div>
  </div>
}

Animation is generally a bad idea since you want every frame to be scannable. But the call of the sea is unrelenting. In this example, each pixel only changes in scale, and the center 1/3 of each pixel is always the correct color like in the dot overlay technique. And that's the final lesson, that none of these techniques are mutually exclusive.

Congratulations, you now know too much about QR codes!

## Thanks for reading!

I hope you learned something interesting, even if it's not useful.

If you'd like to design a QR code, and you're not afraid of writing a little code, give https://qrframe.kylezhe.ng a try.

Once again, my code is available at [`qrframe`](https://github.com/zhengkyl/qrframe).

If you're on the fence then please know, I knew much less than you do now when I started working on [`fuqr`](https://github.com/zhengkyl/fuqr), my QR code generator in Rust that started it all (i use windows btw).

You can do it if you try, but also your time is precious.

See ya! 🫡 

<h2 className="text-xl font-bold pt-32">Random Tangents</h2>

Here are some QR code thoughts I had to get off my mind.

1. **There are only 3 encoding modes.**
    - The QR code standard lists encoding modes that are not relevant to ordinary users which is fine, but every QR code explainer mentions Kanji mode, a legacy mode using a legacy character encoding for Japanese, when it just isn't supported by generators or scanners in normal use. I'm sure some Japanese company uses them, but that doesn't make it relevant. Ditto for Structured append, ECI, and FNC1 encoding modes.
2. **The mask selection step is deeply unserious.**
    - The best mask is chosen by scoring the masked data, but the scoring conditions are arbitrary, and all 8 masks will work just fine anyway.
    - This interative step by step walkthrough showcases this in Steps 7 and 8. Choose the worst mask and see that it doesn't matter.
    - https://www.nayuki.io/page/creating-a-qr-code-step-by-step
3. Proprietary scannable codes are kinda funny. Tiktok and Snapchat have already replaced their custom codes with stylized QR codes. ![four proprietary scan codes](four_horsemen.png)
4. Here are links I don't want to lose.
    - https://www.thonky.com/qr-code-tutorial is a great resource and helped me understand the error correction math.
    - [segno](https://github.com/heuer/segno) is probably the only QR code generator that supports Kanji mode.
    - I've found two 3d galleries of QR code art. If I had a nickel...
        - https://www.qrmosaics.art/3d-gallery
        - https://www.ineoscan.com/qrcodefactory1
    - [QRazyBox](https://merri.cx/qrazybox/) is a super cool QR code recovery tool that I used to decode this book cover and find the [original stock image from 2011](https://www.istockphoto.com/vector/qr-code-gm156283521-15512938).
    <img src="sf_book.jpg" alt="qr code on book cover" className="m-auto"/> 


